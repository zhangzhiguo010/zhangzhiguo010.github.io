<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>张治国的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="张治国的博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="张治国的博客">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="张治国的博客">
  
    <link rel="alternate" href="/atom.xml" title="张治国的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">张治国的博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-JS-相等和全等的区别" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/22/JS-相等和全等的区别/" class="article-date">
  <time datetime="2018-11-22T14:32:29.000Z" itemprop="datePublished">2018-11-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/22/JS-相等和全等的区别/">JS-相等和全等的区别</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#参考资料：《JS高级程序设计》</p>
<p>#一、== 和 === 间的区别是什么？</p>
<p>###1、简述 </p>
<ul>
<li>==： 相等运算符，类型相同直接比较，类型不同先转换后比较</li>
<li>===：全等运算符，类型相同直接比较，类型不同直接false</li>
</ul>
<p>###2、相等运算符的转换规则：</p>
<p>#####（1）基本类型相互间比较：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*null和undefined不做类型转换，但null和undefined相等；*/</span></span><br><span class="line"><span class="literal">null</span>/<span class="literal">undefined</span> == <span class="number">1</span>				<span class="comment">// 错误</span></span><br><span class="line"><span class="literal">null</span>/<span class="literal">undefined</span> == <span class="string">'1'</span>			<span class="comment">// 错误</span></span><br><span class="line"><span class="literal">null</span>/<span class="literal">undefined</span> == <span class="literal">true</span>			<span class="comment">// 错误</span></span><br><span class="line"><span class="literal">null</span>/<span class="literal">undefined</span> == <span class="literal">false</span>			<span class="comment">// 错误</span></span><br><span class="line"><span class="literal">null</span> == <span class="literal">undefined</span>				<span class="comment">// 正确</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*数字和字符串，字符串被Number()函数转成了数字*/</span></span><br><span class="line"><span class="number">1</span> == <span class="string">'1'</span>			<span class="comment">// 正确		1 == 1</span></span><br><span class="line"><span class="number">1</span> == <span class="string">'01'</span>			<span class="comment">// 正确		1 == 01</span></span><br><span class="line"><span class="comment">/*数字和布尔值，布尔值被Number()函数转成了数字*/</span></span><br><span class="line"><span class="number">0</span> == <span class="string">'false'</span>		<span class="comment">// 正确		0 == 0</span></span><br><span class="line"><span class="number">1</span> == <span class="string">'true'</span>			<span class="comment">// 正确		1 == 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*字符串和布尔值，字符串和布尔值都被Number()函数转成了数字*/</span></span><br><span class="line"><span class="literal">true</span> == <span class="string">'1'</span>			<span class="comment">// 正确		1 == 1</span></span><br><span class="line"><span class="literal">false</span> == <span class="string">'0'</span>		<span class="comment">// 正确		0 == 0</span></span><br><span class="line"><span class="literal">true</span> == <span class="string">'123'</span>		<span class="comment">// 错误		1 == 123</span></span><br><span class="line"><span class="literal">false</span> == <span class="string">'123'</span>		<span class="comment">// 错误		0 == 123</span></span><br></pre></td></tr></table></figure>
<p>#####（2）引用类型间相互比较：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*比较的是地址，地址相同的情况*/</span></span><br><span class="line"><span class="keyword">let</span> c = &#123;<span class="attr">age</span>: <span class="number">28</span>&#125;	<span class="comment">//假 地址：100</span></span><br><span class="line"><span class="keyword">let</span> d = c			<span class="comment">//假 地址：100</span></span><br><span class="line">c == d				<span class="comment">// 正确</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*比较的是地址，地址不同的情况*/</span></span><br><span class="line"><span class="keyword">let</span> a = &#123;<span class="attr">age</span>: <span class="number">18</span>&#125;	<span class="comment">//假 地址：101</span></span><br><span class="line"><span class="keyword">let</span> b = &#123;<span class="attr">age</span>: <span class="number">18</span>&#125;	<span class="comment">//假 地址：102</span></span><br><span class="line">a == b				<span class="comment">// 错误</span></span><br></pre></td></tr></table></figure>
<p>#####（3）基本类型和引用类型比较：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*对象和数字：对象转成数字*/</span></span><br><span class="line">[<span class="number">0</span>] == <span class="number">0</span>			<span class="comment">// 正确		0 == 0</span></span><br><span class="line">[<span class="number">123</span>] == <span class="number">123</span>		<span class="comment">// 正确		123 == 123</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*对象和字符串：对象转成字符串*/</span></span><br><span class="line">[<span class="number">0</span>] == <span class="string">'0'</span>			<span class="comment">// 正确		'0' == '0'</span></span><br><span class="line">[<span class="number">123</span>] == <span class="string">'123'</span>		<span class="comment">// 正确		'123' == '123'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*对象和布尔值，对象和布尔值都转成了数字*/</span></span><br><span class="line">[<span class="number">0</span>] == <span class="literal">true</span>		<span class="comment">// 错误		0 == 1</span></span><br><span class="line">[<span class="number">0</span>] == <span class="literal">false</span>	<span class="comment">// 正确		0 == 0</span></span><br><span class="line">[<span class="number">1</span>] == <span class="literal">true</span>		<span class="comment">// 正确		1 == 1</span></span><br><span class="line">[<span class="number">1</span>] == <span class="literal">false</span>	<span class="comment">// 错误		1 == 1</span></span><br><span class="line">[<span class="number">123</span>] == <span class="literal">true</span>	<span class="comment">// 错误		123 == 1</span></span><br></pre></td></tr></table></figure>
<p>#二、考题</p>
<ol>
<li>(a ==1 &amp;&amp; a== 2 &amp;&amp; a==3) 可能为 true 吗？<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*a会自动调用toString()方法，该方法被我重写了*/</span></span><br><span class="line">a = &#123;</span><br><span class="line">  value: <span class="number">0</span>,</span><br><span class="line">  toString()&#123;</span><br><span class="line">    a.value += <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> a.value </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/22/JS-相等和全等的区别/" data-id="cjospacg9000kk4qrxo3tsfz3" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JS-数据类型及类型转换" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/22/JS-数据类型及类型转换/" class="article-date">
  <time datetime="2018-11-22T14:12:09.000Z" itemprop="datePublished">2018-11-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/22/JS-数据类型及类型转换/">JS-数据类型及类型转换</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#参考资料：MDN文档、《JS高程》、《JS权威指南》page32页</p>
<p>#一、JS中七大数据类型：</p>
<ul>
<li>数字—-Number</li>
<li>字符串—-String</li>
<li>布尔值—-Boolean</li>
<li>符号—-Symble</li>
<li>空—-Null</li>
<li>未定义—-Undefined</li>
<li>对象—-Object（包括对象、函数、数组）</li>
</ul>
<p>#二、类型判断：</p>
<p>###1. typeof 操作符<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">123</span> →→→ <span class="built_in">Number</span>;</span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">NaN</span> →→→ <span class="built_in">Number</span>;</span><br><span class="line"><span class="keyword">typeof</span> <span class="string">"ab"</span> →→→ <span class="built_in">String</span>;</span><br><span class="line"><span class="keyword">typeof</span> <span class="string">"123"</span> →→→ <span class="built_in">String</span>;</span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span>/<span class="literal">false</span> →→→ <span class="built_in">Boolean</span>;</span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span> →→→ <span class="built_in">Object</span>;      <span class="comment">//空的对象引用</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span> →→→ Undefined;</span><br><span class="line"><span class="keyword">typeof</span> &#123;&#125; →→→ <span class="built_in">Object</span>;</span><br><span class="line"><span class="keyword">typeof</span> [] →→→ <span class="built_in">Object</span>;</span><br><span class="line"><span class="keyword">typeof</span> fun()&#123;&#125; →→→ <span class="built_in">Function</span>;</span><br></pre></td></tr></table></figure></p>
<p>###2. instanceof运算符</p>
<p>#三、类型转换</p>
<p>###1. 转成数字：</p>
<ol>
<li><p>Number(xxx)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*字符串*/</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">''</span>);   <span class="comment">//0</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">'555'</span>);   <span class="comment">//555</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">'abc'</span>);   <span class="comment">//NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*布尔*/</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">true</span>);   <span class="comment">//1</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">false</span>);   <span class="comment">//0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*空*/</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">null</span>);   <span class="comment">//0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*未定义*/</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">undefined</span>);   <span class="comment">//NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*对象*/</span></span><br><span class="line"><span class="built_in">Number</span>(&#123;&#125;);   <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">Number</span>([]);   <span class="comment">//0</span></span><br><span class="line"><span class="built_in">Number</span>(&#123;<span class="attr">a</span>:<span class="number">555</span>&#125;);   <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">Number</span>([<span class="number">555</span>]);   <span class="comment">//555</span></span><br><span class="line"><span class="built_in">Number</span>([<span class="number">55</span>,<span class="number">22</span>]);   <span class="comment">//NaN</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>xxx-0  常用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*字符串*/</span></span><br><span class="line"><span class="string">''</span> <span class="number">-0</span>;   <span class="comment">//0</span></span><br><span class="line"><span class="string">'555'</span> <span class="number">-0</span>;   <span class="comment">//555</span></span><br><span class="line"><span class="string">'abc'</span><span class="number">-0</span>;   <span class="comment">//NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*布尔*/</span></span><br><span class="line"><span class="literal">true</span><span class="number">-0</span>;   <span class="comment">//1</span></span><br><span class="line"><span class="literal">false</span><span class="number">-0</span>;   <span class="comment">//0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*空*/</span></span><br><span class="line"><span class="literal">null</span><span class="number">-0</span>;   <span class="comment">//0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*未定义*/</span></span><br><span class="line"><span class="literal">undefined</span><span class="number">-0</span>;   <span class="comment">//NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*对象*/</span></span><br><span class="line">&#123;&#125;<span class="number">-0</span>;   <span class="comment">//NaN</span></span><br><span class="line">&#123;<span class="attr">a</span>:<span class="number">555</span>&#125;<span class="number">-0</span>;   <span class="comment">//NaN</span></span><br><span class="line">[]<span class="number">-0</span>;   <span class="comment">//0</span></span><br><span class="line">[<span class="number">555</span>]<span class="number">-0</span>;   <span class="comment">//555</span></span><br><span class="line">[<span class="number">55</span>,<span class="number">22</span>]<span class="number">-0</span>;   <span class="comment">//NaN</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>+xxx</p>
</li>
<li><p>parseInt(xxx)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*字符串*/</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">''</span>);   <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">'555'</span>);   <span class="comment">//555</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="string">'abc'</span>);   <span class="comment">//NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*布尔*/</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="literal">true</span>);   <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="literal">false</span>);   <span class="comment">//NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*空*/</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="literal">null</span>);   <span class="comment">//NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*未定义*/</span></span><br><span class="line"><span class="built_in">parseInt</span>(<span class="literal">undefined</span>);   <span class="comment">//NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*对象*/</span></span><br><span class="line"><span class="built_in">parseInt</span>(&#123;&#125;);   <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>([]);   <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>(&#123;<span class="attr">a</span>:<span class="number">555</span>&#125;);   <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">parseInt</span>([<span class="number">555</span>]);   <span class="comment">//555</span></span><br><span class="line"><span class="built_in">parseInt</span>([<span class="number">11</span>,<span class="number">22</span>]);   <span class="comment">//11</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>parseFloat(xxx)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*字符串*/</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">''</span>);   <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">'555'</span>);   <span class="comment">//555</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="string">'abc'</span>);   <span class="comment">//NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*布尔*/</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="literal">true</span>);   <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="literal">false</span>);   <span class="comment">//NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*空*/</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="literal">null</span>);   <span class="comment">//NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*未定义*/</span></span><br><span class="line"><span class="built_in">parseFloat</span>(<span class="literal">undefined</span>);   <span class="comment">//NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*对象*/</span></span><br><span class="line"><span class="built_in">parseFloat</span>(&#123;&#125;);   <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">parseFloat</span>([]);   <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">parseFloat</span>(&#123;<span class="attr">a</span>:<span class="number">555</span>&#125;);   <span class="comment">//NaN</span></span><br><span class="line"><span class="built_in">parseFloat</span>([<span class="number">555</span>]);   <span class="comment">//555</span></span><br><span class="line"><span class="built_in">parseFloat</span>([<span class="number">11</span>,<span class="number">22</span>]);   <span class="comment">//11</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>###2. 转成字符串：</p>
<ol>
<li><p>String(xxx)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*数字*/</span></span><br><span class="line"><span class="keyword">var</span> n=<span class="number">2</span>; </span><br><span class="line"><span class="built_in">String</span>(n)  <span class="comment">//'2'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*布尔*/</span></span><br><span class="line"><span class="keyword">var</span> n=<span class="literal">true</span>/<span class="literal">false</span></span><br><span class="line"><span class="built_in">String</span>(n)  <span class="comment">//'true/false'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*空和未定义*/</span></span><br><span class="line"><span class="built_in">String</span>(<span class="literal">null</span>)  <span class="comment">//'null'</span></span><br><span class="line"><span class="built_in">String</span>(<span class="literal">undefined</span>)  <span class="comment">//'undefined'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*对象*/</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123; &#125;</span><br><span class="line">obj.toString( )  <span class="comment">//'[object object]'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>xxx+’’  常用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*数字*/</span></span><br><span class="line"><span class="keyword">var</span> n=<span class="number">2</span>; </span><br><span class="line">n+<span class="string">''</span>  <span class="comment">//'2'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*布尔*/</span></span><br><span class="line"><span class="keyword">var</span> n=<span class="literal">true</span>/<span class="literal">false</span></span><br><span class="line">n+<span class="string">''</span>  <span class="comment">//'true/false'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*空和未定义*/</span></span><br><span class="line"><span class="literal">null</span>+<span class="string">''</span>  <span class="comment">//'null'</span></span><br><span class="line"><span class="literal">undefined</span>+<span class="string">''</span>  <span class="comment">//'undefined'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*对象*/</span></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123; &#125;</span><br><span class="line">obj1+<span class="string">''</span>  <span class="comment">//'[object object]' </span></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;<span class="attr">a</span>:<span class="number">123</span>, <span class="attr">b</span>:<span class="string">'fff'</span>&#125;</span><br><span class="line">obj2+<span class="string">''</span>   <span class="comment">//'[object object]'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> arr1 = [ ]</span><br><span class="line">arr1+<span class="string">''</span>   <span class="comment">//' '</span></span><br><span class="line"><span class="keyword">var</span> arr2 = [<span class="number">12</span>,<span class="number">23</span>,<span class="number">45</span>]</span><br><span class="line">arr2+<span class="string">''</span>   <span class="comment">//'12,23,45'</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>xxx.toString()</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*数字*/</span></span><br><span class="line"><span class="keyword">var</span> n=<span class="number">2</span>; </span><br><span class="line">n.toString( )  <span class="comment">//'2'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*布尔*/</span></span><br><span class="line"><span class="keyword">var</span> n=<span class="literal">true</span>/<span class="literal">false</span></span><br><span class="line">n.toString( )  <span class="comment">//'true/false'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*空和未定义*/</span></span><br><span class="line"><span class="literal">null</span>.toString( )  <span class="comment">//报错</span></span><br><span class="line"><span class="literal">undefined</span>.toString( )  <span class="comment">//报错</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*对象*/</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123; &#125;</span><br><span class="line">obj.toString( )  <span class="comment">//'[object object]'</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>###3. 转成布尔值：</p>
<ol>
<li><p>Boolean(xxx)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*只有下面5种情况是false，其他都是true，包括空对象*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*数字*/</span></span><br><span class="line"><span class="built_in">Boolean</span>(<span class="number">0</span>);   <span class="comment">//false</span></span><br><span class="line"><span class="built_in">Boolean</span>(<span class="literal">NaN</span>);   <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*字符串*/</span></span><br><span class="line"><span class="built_in">Boolean</span>(‘’)   <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*空和未定义*/</span></span><br><span class="line"><span class="built_in">Boolean</span>(<span class="literal">null</span>);   <span class="comment">//false</span></span><br><span class="line"><span class="built_in">Boolean</span>(<span class="literal">undefined</span>);   <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>!!xxx  推荐</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*只有下面5种情况是false，其他都是true，包括空对象*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*数字*/</span></span><br><span class="line">!! <span class="number">0</span>;   <span class="comment">//false</span></span><br><span class="line">!! <span class="literal">NaN</span>;   <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*字符串*/</span></span><br><span class="line">!! <span class="string">''</span>   <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*空和未定义*/</span></span><br><span class="line">!! <span class="literal">null</span>;   <span class="comment">//false</span></span><br><span class="line">!! <span class="literal">undefined</span>;   <span class="comment">//false</span></span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/22/JS-数据类型及类型转换/" data-id="cjospacg6000hk4qr5oqmlmtz" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JS-变量" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/22/JS-变量/" class="article-date">
  <time datetime="2018-11-22T13:51:31.000Z" itemprop="datePublished">2018-11-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/22/JS-变量/">JS-变量</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#参考资料：MDN文档、方应杭的谋篇博客</p>
<p>#一、如何创建：</p>
<ul>
<li>关键字：var</li>
<li>关键字：let<ul>
<li>let声明的变量的作用域是块级的；</li>
<li>let不能重复声明已经存在的变量；</li>
<li>let有临时死区（创建位置与初始化位置之间的区域）；</li>
</ul>
</li>
<li>关键字：const</li>
</ul>
<p>#二、变量提升</p>
<p>###1. 总结：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 		创建：提升   	初始化：提升      		赋值：提升</span></span><br><span class="line"><span class="function"><span class="title">var</span>         	创建：提升    	初始化：提升<span class="title">undefined</span>  	赋值：不提升</span></span><br><span class="line"><span class="function"><span class="title">let</span>          	创建：提升    	初始化： 不提升       		赋值：不提升</span></span><br><span class="line"><span class="function"><span class="title">const</span>     		创建：提升		初始化：不提升         	赋值：不存在赋值</span></span><br></pre></td></tr></table></figure></p>
<p>###2.经典难题：<br>let创建提升，初始化不提升，两者间有临时死区，临时死区内使用会报错</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> k = <span class="number">1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(k)     <span class="comment">//此处报错，k在临时死区中</span></span><br><span class="line">    <span class="keyword">let</span> k = <span class="number">2</span>            </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>###3.对比案例：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*此处不报错，m创建被提升，自动初始化为undefined，故打印出undefined*/</span></span><br><span class="line"><span class="built_in">console</span>.log(m)    </span><br><span class="line"><span class="keyword">var</span> m = <span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>###4.const创建注意事项：</p>
<ul>
<li>const XXX = 基本类型（XXX存的是数值，数值改变，定会报错）</li>
<li>const YYY = 引用类型（YYY存的是地址，地址指向的对象变化，不会报错，因为地址没有改变）</li>
</ul>
<p>#三、其他零散知识：</p>
<ul>
<li>变量只是一个用来盛放数据的容器， JS中变量是松散类型的，故可以保存任何类型的数据值；</li>
<li>全局变量：不在任何函数内声明的变量；局部变量：在函数内声明的变量</li>
<li>函数体内变量重名时，局部变量优先级高于全局变量</li>
<li>声明提前：函数体内的变量声明都被提前到函数体顶部，但是变量赋值的位置不会改变。</li>
<li>数字都是以64位浮点数方式存储；字符都是以16位字符编码方式存储 </li>
<li>当var x=1;var x;则x=1 变量重复声明无效；当var x=1;var x=2;则x=2 变量重复赋值有效</li>
</ul>
<p>#四、小难题<br><img src="http://piks830x0.bkt.clouddn.com/var%20let%20%E5%B0%8F%E9%9A%BE%E9%A2%98.png" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/22/JS-变量/" data-id="cjospacg2000dk4qrh6yve4o6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JS-null和undefined" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/22/JS-null和undefined/" class="article-date">
  <time datetime="2018-11-22T13:43:04.000Z" itemprop="datePublished">2018-11-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/22/JS-null和undefined/">JS-null和undefined</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#参考资料：《JS高程》page24页、《JS权威指南》page44页</p>
<p>#一、null<br>代表“空值”，可以表示数字、字符串和对象是无值的。</p>
<p>#二、undefined<br>代表“未定义”，声明了变量但没赋值，那么这个变量的值就是undefined。</p>
<p>#三、null和undefined不同点</p>
<ul>
<li>有一个对象object  定义了但是暂时不想给值，就null，<br>  例子：var obj = nul;</li>
<li>有一个非对象  定义了但是暂时不想给值，就undefined，<br>  例子：var aa = undefined;</li>
</ul>
<p>#四、null和undefined的相同点：</p>
<ul>
<li>都表示值得空缺，可以互换使用；</li>
<li>null==undefined，null===undefined；</li>
<li>转成布尔值时都为false；</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/22/JS-null和undefined/" data-id="cjospacgb000mk4qr19k55mep" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JS-Promist对象" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/22/JS-Promist对象/" class="article-date">
  <time datetime="2018-11-22T13:23:29.000Z" itemprop="datePublished">2018-11-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/22/JS-Promist对象/">JS-Promist对象</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#参考资料：MDN文档</p>
<p>#一、创建：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*我常用的创建方式*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myPromise</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">     	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>( <span class="function">(<span class="params">resolve, reject </span>)=&gt;</span>&#123;</span><br><span class="line">         	做事（异步任务）</span><br><span class="line">     		如果成功就调用 resolve（）</span><br><span class="line">       	如果失败就调用 reject（）</span><br><span class="line">      	&#125;)</span><br><span class="line">  	&#125;</span><br><span class="line">  myPromise().then(fn1, fn2).then(fn3, fn4)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>如果成功就调用resolve，也就是执行fn1，fn1的参数就是resolve的参数</p>
<ul>
<li>fn1执行成功则fn3被调用，fn3的参数就是fn1的return结果；</li>
<li>fn1执行出错则fn4被调用，fn4的参数就是fn1的return结果；</li>
</ul>
</li>
<li><p>如果失败就调用reject，也就是执行fn2，参数问题同上</p>
<ul>
<li>fn2执行成功则fn3被调用，参数问题同上；</li>
<li>fn2执行出错则fn4被调用，参数问题同上；</li>
</ul>
</li>
</ul>
<p>#二、 属性：</p>
<ul>
<li>Promise.length: 属性值总是1，表示构造函数的参数个数</li>
<li>Promise.prototype：表示Promise构造函数的原型，原型的constructor属性是Promise构造函数</li>
</ul>
<p>#三、方法：</p>
<p>###1. Promise.prototype.catch()</p>
<ul>
<li>如果成功，就不执行函数参数；</li>
<li>如果失败，就执行函数参数。</li>
</ul>
<p>###2. Promise.prototype.finally()</p>
<ul>
<li>无论成功还是失败，都执行函数参数，函数参数不接收参数。</li>
</ul>
<p>###3. Promise.prototype.then(）</p>
<ul>
<li>如果成功，就执行then的第一个函数参数；</li>
<li>如果失败，就执行then的第二个函数参数。</li>
</ul>
<p>###4. Promise.all()</p>
<ul>
<li>输入：数组</li>
<li>输出：Promise实例</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> pro = <span class="built_in">Promise</span>.all([xx, yy, zz]); </span><br><span class="line">pro.then(AA, BB)</span><br></pre></td></tr></table></figure>
<ul>
<li>执行AA：迭代器中所有promise调用resolve时</li>
<li>执行BB：迭代器中至少一个promise调用reject时</li>
</ul>
<p>###5. Promise.race()</p>
<ul>
<li>输入：数组</li>
<li>输出：Promise实例</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> xx = <span class="keyword">new</span> <span class="built_in">Promise</span>()    </span><br><span class="line"><span class="keyword">let</span> yy = <span class="keyword">new</span> <span class="built_in">Promise</span>()    </span><br><span class="line"><span class="keyword">let</span> zz = <span class="keyword">new</span> <span class="built_in">Promise</span>()</span><br><span class="line"><span class="keyword">let</span> pro = <span class="built_in">Promise</span>.rece([xx, yy, zz])</span><br><span class="line">pro.then(AA, BB)</span><br></pre></td></tr></table></figure>
<ul>
<li>执行AA：迭代器中某个（最早的）promise调用resolve时。</li>
<li>执行BB：迭代器中某个（最早的）promise调用reject时。</li>
</ul>
<p>###6. Promise.reject()</p>
<ul>
<li>输入：失败原因</li>
<li>输出：Promise对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.reject(<span class="string">'失败的原因'</span>).then(</span><br><span class="line">	()=&gt;&#123; 从不会被调用 &#125;, </span><br><span class="line">	(ev)=&gt;&#123; 会被调用 &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>###7. Promise.resolve()</p>
<ul>
<li>输入：成功原因/数据</li>
<li>输出：Promise对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.resolve(<span class="string">'成功原因/数据'</span>).then( </span><br><span class="line">	(ev)=&gt;&#123; 会被调用 &#125;, </span><br><span class="line">	()=&gt;&#123; 从不会被调用 &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/22/JS-Promist对象/" data-id="cjospacg0000bk4qrcfkgmsj9" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JS-JSON对象" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/22/JS-JSON对象/" class="article-date">
  <time datetime="2018-11-22T13:05:27.000Z" itemprop="datePublished">2018-11-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/22/JS-JSON对象/">JS-JSON对象</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/22/JS-JSON对象/" data-id="cjospacfy0009k4qrr3yragpz" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JS-数组（基础）" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/22/JS-数组（基础）/" class="article-date">
  <time datetime="2018-11-22T12:43:34.000Z" itemprop="datePublished">2018-11-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/22/JS-数组（基础）/">JS-数组（基础）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#参考资料：MDN、《JS高程》、《JS权威指南》</p>
<p>#一、数组的创建和调用</p>
<p>##1.数组定义相关问题：</p>
<ul>
<li>数组是按次序排列的一组值，每个值的位置都有编号（从0开始），整个数组用方括号表示；</li>
<li>数组是特殊的对象，特殊在于他的键名/属性名是按次序排列的一组整数，</li>
<li>typeof运算符检测数组，返回object；</li>
<li>数组的原型链上有Array.prototype对象，该对象拥有操控数组的方法和属性；</li>
</ul>
<p>##2. 数组创建相关问题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*new Array()*/</span></span><br><span class="line"><span class="keyword">var</span> color = <span class="keyword">new</span> <span class="built_in">Array</span>( <span class="string">"red"</span>, <span class="string">"yellow"</span>, <span class="string">"blue"</span>);</span><br><span class="line"><span class="comment">/*数组直接量*/</span></span><br><span class="line"><span class="keyword">var</span> color = [<span class="string">"red"</span>, <span class="string">"yellow"</span>, <span class="string">"blue"</span>];</span><br></pre></td></tr></table></figure>
<ul>
<li>new Array( )方法中：<br>  只有一个参数是就是数组的长度，数组元素都是空元素；<br>  两个及以上参数时，才是数组！</li>
<li>new Array( )方法中，有没有new都一样，和对象与函数的一样，<br>  但是基本类型的构造函数创建方法有和没有new有着本质的区别。</li>
</ul>
<p>##3. 数组元素相关问题：</p>
<ul>
<li>和对象一样，数组的属性名也是字符串，写成数字，会转成字符串，arr[0]===arr[‘0’]；</li>
<li>数组的属性名不符合标识符规范，只能使用方括号操作数组，不能使用点运算符；</li>
<li>方括号法操作数组包括取元素，修改元素，新增元素</li>
<li>除了可以定义时赋值，也可以先定义后赋值，任何类型的数据都可以放入数组；<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'22'</span>,<span class="number">33</span>, &#123;<span class="attr">a</span>:<span class="number">44</span>,<span class="attr">b</span>:<span class="string">'cc'</span>&#125;, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="literal">true</span>;&#125;]</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>#二、其他零散知识</p>
<p>###1. 数组空位：</p>
<ul>
<li>两个逗号之间没有任何值，则是空位，  </li>
<li>delete删除元素会创建空位，空位也占元素个数；</li>
<li>空位是可以读取的，返回undefined；</li>
<li>空位表示数组没有这个元素，所以不会被for/in等方法遍历到，</li>
<li>undefined表示数组有这个元素，值为undefined；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr=[<span class="string">'abc'</span>, , <span class="literal">undefined</span>, <span class="string">'def'</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/*for/in循环会跳过空位*/</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i <span class="keyword">in</span> arr)&#123; <span class="built_in">console</span>.log(arr[i]) &#125;;    	<span class="comment">//'abc' undefined 'def'   </span></span><br><span class="line"></span><br><span class="line">arr.length; 					<span class="comment">//4  			length属性不会跳过空位</span></span><br><span class="line">arr[<span class="number">0</span>]; 						<span class="comment">//'abc'</span></span><br><span class="line"><span class="keyword">delete</span> arr[<span class="number">0</span>];  </span><br><span class="line">arr[<span class="number">0</span>];   						<span class="comment">//undefined  	删除元素形成空位       </span></span><br><span class="line">arr.length;                    	<span class="comment">//4    			删除了元素但不影响元素个数</span></span><br><span class="line">arr[<span class="number">1</span>]; 						<span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>
<p>###2. in运算符：</p>
<ul>
<li>in运算符检查数组是否有某个键名，它适用于对象也适用于数组；</li>
<li>如果某个位置是空位，in运算符返回false；</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="string">'位置0'</span>, <span class="literal">undefined</span>];</span><br><span class="line"><span class="number">0</span> <span class="keyword">in</span> arr; 			<span class="comment">//非空位，返回true</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">in</span> arr; 			<span class="comment">//undefined和空位不一样，返回true</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">in</span> arr; 			<span class="comment">//空位，返回fals</span></span><br></pre></td></tr></table></figure>
<p>###3. 类/伪数组对象：</p>
<ul>
<li>伪数组原型链上没有Array.prototype对象</li>
<li>如果一个对象的所有键名都是正整数或零，并且有length属性，它就是伪数组。</li>
<li>类数组对象不是数组，数组特有的方法，它是没有的，比如push等方法；</li>
<li>类数组对象虽然也有length属性，但它是固定的而数组的length是随着元素变化而变化的；</li>
<li>典型的类数组对象有字符串，函数的arguments对象，以及大多数的DOM元素集，<br>  如document.genElementsByTagName(‘p’);     </li>
<li>将类数组对象转成数组对象的方法有：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*方法1：推荐*/</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="built_in">Array</span>.from(arrayLike)</span><br><span class="line"><span class="comment">/*方法2：slice方法*/</span></span><br><span class="line"><span class="keyword">var</span> arr = <span class="built_in">Array</span>.prototype.slice.call(arrayLike);</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/22/JS-数组（基础）/" data-id="cjospacg7000ik4qrh8cue04m" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JS-数组（升级）" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/22/JS-数组（升级）/" class="article-date">
  <time datetime="2018-11-22T10:15:18.000Z" itemprop="datePublished">2018-11-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/22/JS-数组（升级）/">JS-数组（升级）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#参考资料：MDN、Underscore.js库</p>
<p>#一、数组的属性：</p>
<p>###1. Array.prototype<br>    表示Array构造函数的原型（对象）</p>
<p>###2. Array.prototype.constructor<br>    表示创建实例数组的那个构造函数的引用（此处是引用是地址，不是简单的字符串格式的函数名）</p>
<p>###3. Array.length<br>    返回数组元素个数，它是一个动态值，等于键名中最大整数加上1，故数组是一个动态的数据结构；</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>];  </span><br><span class="line"><span class="comment">/*输出2*/</span></span><br><span class="line">  	arr.length;</span><br><span class="line">  	</span><br><span class="line">  	<span class="comment">/*undefined: 当length大于实际个数，则元素会新增，新增的都是undefined；*/</span></span><br><span class="line">  	arr.length=<span class="number">3</span>; arr[<span class="number">3</span>];</span><br><span class="line">  	</span><br><span class="line">  	<span class="comment">/*undefined: 当length小于实际个数，则元素会删除，删除后面的不在length以内的元素；*/</span></span><br><span class="line">  	arr.length=<span class="number">1</span>; arr[<span class="number">1</span>]；</span><br><span class="line">  	</span><br><span class="line">  	<span class="comment">/**/</span></span><br><span class="line">  	arr[<span class="number">100</span>]=<span class="string">'a'</span>;  arr.length;                     <span class="comment">//101;   length是键名最大整数加1</span></span><br><span class="line">  	arr.abc = <span class="string">'abc'</span>;  arr.length;                 <span class="comment">//101;   length与键名整数有关，和其他无关！</span></span><br><span class="line">  	arr.length=<span class="number">0</span>;   arr[<span class="number">0</span>];                          <span class="comment">//undefined;   清空数组的一个有效方法是：length属性设置为0；</span></span><br></pre></td></tr></table></figure>
<p>#二、数组的方法：</p>
<p>###1. Array.isArray(xxx)<br>    参数：xxx是要做判断的对象/数组<br>      返回值：布尔值，判断是数组就返回true，否则是false</p>
<p>###2. Array.from(arrayLike, fn)<br>    参数：arrayLike是类数组对象或可迭代的对象，fn是新数组中的每个元素都会执行该函数<br>       返回值：类数组转化成新数组，返回该数组</p>
<p>###3. Array.of(ele0, ele1….elen)<br>    参数：按顺序成为新数组中的元素，哪怕是单个的数字（备注）<br>       返回值：新数组</p>
<p>###4. array.concat(arr1, arr2…)<br>    参数：被连接的目标数组们（浅拷贝，拷贝的是引用）<br>      返回值：连接多个数组后的新数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = [<span class="number">0</span>];</span><br><span class="line"><span class="keyword">var</span> y = [[<span class="number">1</span>,<span class="number">2</span>]];</span><br><span class="line"><span class="keyword">var</span> z = x.concat(y);	<span class="comment">//[0, [1,2]]   z[1]是y的引用，互相影响</span></span><br></pre></td></tr></table></figure>
<p>###5. array.slice()<br>    参数：起始位置（包含），结束位置（不包含），负数代表从后往前第几个元素<br>      返回值：拆分原数组，返回新数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]</span><br><span class="line">x.slice();			<span class="comment">//['a', 'b', 'c']; </span></span><br><span class="line">x.slice(<span class="number">0</span>,<span class="number">1</span>);  		<span class="comment">//['a']</span></span><br><span class="line">x.slice(<span class="number">-2</span>);  		<span class="comment">//['b', 'c'] 倒数第2个开始</span></span><br></pre></td></tr></table></figure>
<p>###6. array.join()<br>    参数：元素之间的连接符，默认是逗号<br>       返回值：将数组变成字符串，返回的是该字符串</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]    </span><br><span class="line">x.join();  			<span class="comment">// "a,b,c"</span></span><br><span class="line">x.join(<span class="string">''</span>);  		<span class="comment">// "abc"</span></span><br><span class="line">x.join(<span class="string">'加'</span>)			<span class="comment">// "a加b加c"</span></span><br></pre></td></tr></table></figure>
<p>###7. 字符串.split()<br>    参数：分隔符<br>       返回值：在源字符串以分隔符出现的位置进行分割，分割之后变成新数组，返回该数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="string">"abc"</span>;</span><br><span class="line">x.split(<span class="string">'a'</span>); 		<span class="comment">// ['', 'bc']</span></span><br><span class="line">x.split(<span class="string">'b'</span>);  		<span class="comment">// ['a', 'c']</span></span><br><span class="line">x.split();  		<span class="comment">// ['abc']</span></span><br><span class="line">x.split(<span class="string">''</span>);   		<span class="comment">// ['a', 'b', 'c']</span></span><br></pre></td></tr></table></figure>
<p>###8. array.forEach((item,index)=&gt;{ })<br>    参数：为每个元素执行的函数<br>     返回值：遍历之后，没有返回结果</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = [<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span> ];</span><br><span class="line">x.forEach(<span class="function">(<span class="params">item, index</span>)=&gt;</span>&#123;&#125;)</span><br></pre></td></tr></table></figure>
<p>###9. array.map((item,index)=&gt;{ })<br>    参数：为每个元素执行的函数<br>      返回值：遍历之后，返回新数组           </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = [<span class="string">'1'</span>, <span class="string">'2'</span>, <span class="string">'3'</span> ];</span><br><span class="line">x.map(<span class="function">(<span class="params">item, index</span>)=&gt;</span>&#123;&#125;)</span><br></pre></td></tr></table></figure>
<p>###10. array.filter((item,index)=&gt;{})<br>    参数：函数，用来过滤数组用的<br>     返回值：过滤之后的新数组</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">x.filter(<span class="function">(<span class="params">item, index</span>)=&gt;</span>&#123; </span><br><span class="line">	<span class="keyword">return</span> value &gt;= <span class="number">2</span> </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>###11. array.reduce(()=&gt;{}, xx)<br>    参数：每个元素都调用的函数<br>     返回值：为数组中的每个元素应用一个函数，将其减少到单个值     </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">x.reduce(<span class="function">(<span class="params">add, value</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> add=add+value</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>###12. array.sort((x, y)=&gt;{return x-y})<br>    参数：参数：一个函数（非必须）<br>     返回值：返回排序之后的新数组，原数组被改变了！</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span> ];   </span><br><span class="line">x.sort(<span class="function">(<span class="params">x, y</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x-y</span><br><span class="line">&#125;);		<span class="comment">//[1,2,3];       //可能是升序也可能是降序</span></span><br></pre></td></tr></table></figure>
<p>###13. array.indexOf()<br>    参数：要查找的那个元素<br>    返回值：第一个被找到的那个元素在数组中的位置，没找到就返回-1。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = [ <span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span> ]</span><br><span class="line">x.indexof(<span class="string">'a'</span>);	  		<span class="comment">//	0     </span></span><br><span class="line">x.indexof(<span class="string">'c'</span>);  		<span class="comment">//	-1</span></span><br></pre></td></tr></table></figure>
<p>###14. push()<br>    参数：要添加到数组结尾的元素。<br>    返回值：新数组的长度（新的length值）。   也可用于类数组对象！</p>
<p>###15. unshift()<br>    参数：要添加到数组开头的元素。<br>    返回值：新数组的长度（新的length值）。  也可用于类数组对象！</p>
<p>###16. pop()<br>    返回值：数组结尾的已经被删除了的那个元素。</p>
<p>###17. shift()<br>    返回值：数组开头的已经被删除了的那个元素。</p>
<p>#二、数组去重：</p>
<ol>
<li>借助对象属性名<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">-2</span>,<span class="string">'2'</span>, <span class="number">2</span> ,<span class="number">5</span>,<span class="number">8</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">9</span>,<span class="number">9</span>,<span class="number">3</span>,<span class="number">3</span>]</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filterArray</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">let</span> obj = &#123;&#125;</span><br><span class="line">       <span class="keyword">let</span> newArr = []</span><br><span class="line">       arr.map(<span class="function">(<span class="params">item</span>)=&gt;</span>&#123;</span><br><span class="line">       	<span class="keyword">if</span>(obj[item] !== item)&#123;</span><br><span class="line">   	        obj[item]=item</span><br><span class="line">  	            newArr.push(item)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">       <span class="keyword">return</span> newArr</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<ol start="2">
<li>利用数组的indexof方法<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filterArray</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">   	<span class="keyword">let</span> newArr = []</span><br><span class="line">   	arr.map(<span class="function">(<span class="params">item</span>)=&gt;</span>&#123;</span><br><span class="line">       	newArr.indexOf(item) === <span class="number">-1</span> &amp;&amp; newArr.push(item)</span><br><span class="line">   	&#125;)</span><br><span class="line">   	<span class="keyword">return</span> newArr</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>3、Set去重<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr))</span><br></pre></td></tr></table></figure></p>
<p>#三、数组方法源代码</p>
<p>##1. join方法：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.my_Join = functio</span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">this</span>[<span class="number">0</span>] || <span class="string">''</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">1</span>; i&lt;<span class="keyword">this</span>.length; i</span><br><span class="line">        result = result + char + </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>##2. slice方法：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.my_Slice = <span class="function"><span class="keyword">function</span>(<span class="params">begin,end</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = []</span><br><span class="line">    begin = begin || <span class="number">0</span></span><br><span class="line">    end = end || <span class="keyword">this</span>.length</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=begin; i&lt;end; i++)&#123;</span><br><span class="line">        result.push(<span class="keyword">this</span>[i])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>##3. sort方法<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.my_Sort = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">    fn = fn || <span class="function"><span class="keyword">function</span> <span class="title">ff</span>(<span class="params">a,b</span>)</span>&#123;<span class="keyword">return</span> a-b&#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;<span class="keyword">this</span>.length<span class="number">-1</span>; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> j=i+<span class="number">1</span>; j&lt;<span class="keyword">this</span>.length; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(fn.call(<span class="literal">null</span>, <span class="keyword">this</span>[j], <span class="keyword">this</span>[i])&lt;<span class="number">0</span>)&#123;</span><br><span class="line">                [<span class="keyword">this</span>[i], <span class="keyword">this</span>[j]] = [<span class="keyword">this</span>[j], <span class="keyword">this</span>[i]]</span><br><span class="line">            &#125; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>##4. forEach方法<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.my_ForEach = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;<span class="keyword">this</span>.length; i++)&#123;</span><br><span class="line">        fn.call(<span class="literal">null</span>, <span class="keyword">this</span>[i], i, <span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>##5. map方法<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.my_Map = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = []</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;<span class="keyword">this</span>.length; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i <span class="keyword">in</span> <span class="keyword">this</span>)&#123;</span><br><span class="line">            result[i] = fn.call(<span class="literal">null</span>, <span class="keyword">this</span>[i], i, <span class="keyword">this</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>##6. filter方法<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.my_Filter = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = []</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;<span class="keyword">this</span>.length; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i <span class="keyword">in</span> <span class="keyword">this</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(fn.call(<span class="literal">null</span>, <span class="keyword">this</span>[i], i, <span class="keyword">this</span>))&#123;</span><br><span class="line">               result.push(<span class="keyword">this</span>[i]) </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>##7. reduce方法<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.my_Reduce = <span class="function"><span class="keyword">function</span>(<span class="params">fn, init</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = init</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>; i&lt;<span class="keyword">this</span>.length; i++)&#123;</span><br><span class="line">        result = fn.call(<span class="literal">null</span>, result, <span class="keyword">this</span>[i], i, <span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/22/JS-数组（升级）/" data-id="cjospacg8000jk4qrg3xig60l" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JS-函数（升级）" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/22/JS-函数（升级）/" class="article-date">
  <time datetime="2018-11-22T08:48:51.000Z" itemprop="datePublished">2018-11-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/22/JS-函数（升级）/">JS-函数（升级）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#参考资料：MDN、《JS高程》、《JS权威指南》</p>
<p>#一、函数内this是什么？<br><img src="http://piks830x0.bkt.clouddn.com/this%E7%9A%84%E6%9C%AC%E8%B4%A8.png" alt="this的辅助理解"></p>
<p>定义：this是参数，连接JavaScript中的函数和对象</p>
<p>口诀：有call看call，没call看点，没call没点就是window（严格模式特殊考虑），<br>    此口诀对箭头函数均不适用</p>
<p>判断：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*this指的是call方法的第一个参数，apply和bind方法也一样*/</span></span><br><span class="line">fn.call()</span><br><span class="line"></span><br><span class="line"><span class="comment">/*this指的是obj对象*/</span></span><br><span class="line">obj.fn()</span><br><span class="line"></span><br><span class="line"><span class="comment">/*this指的是window，如果是严格模式下，就是undefined*/</span></span><br><span class="line">fn()</span><br><span class="line"></span><br><span class="line"><span class="comment">/*箭头函数内外this一样*/</span></span><br><span class="line">()=&gt;&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*this指的是类的实例xx*/</span></span><br><span class="line"><span class="keyword">let</span> xx = <span class="keyword">new</span> ClassName()</span><br><span class="line"></span><br><span class="line"><span class="comment">/*this指的是事件源btn*/</span></span><br><span class="line">btn.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)</span><br><span class="line"><span class="comment">/*this就是btn被调用的那个环境里的this*/</span></span><br><span class="line">btn.addEventListener(<span class="string">'click'</span>,()=&gt;&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*this就是window*/</span></span><br><span class="line">myPromise.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)</span><br><span class="line"><span class="comment">/*this就是resolve被调用时的环境里的this*/</span></span><br><span class="line">myPromise.then(<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;)</span><br></pre></td></tr></table></figure>
<p>#二、异步和回调<br><img src="http://piks830x0.bkt.clouddn.com/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%B9%E5%BC%82%E6%AD%A5%E7%9A%84%E5%A4%84%E7%90%86.png" alt="图片描述"></p>
<p>##1. 异步和同步？</p>
<ul>
<li>同步：等待结果<ul>
<li>例：让黄牛去买票，然后站着等（同步）</li>
</ul>
</li>
<li>异步：不等待结果<ul>
<li>例：让黄牛去买票（告诉黄牛，你买到票就call我），然后去做别的</li>
</ul>
</li>
</ul>
<p>##2. 异步任务执行机制</p>
<p>同步任务在JS引擎中执行，异步任务交给浏览器监听，<br>碰到同步任务，直接从上到下依次执行，碰到异步任务，扔给浏览器监听是否被激活，<br>JS引擎等到当前任务执行完毕，就把激活的异步任务拿过来执行，<br>如果没有被激活的异步任务，JS引擎继续执行下面的任务。</p>
<p>##3. 异步任务的常见类型</p>
<ul>
<li>事件监听：如click、submit等等</li>
<li>前端请求：如ajax，资源加载等等（如图片，脚本）</li>
<li>定时器：setTimeout( )、setInterval( )</li>
</ul>
<p>##4. 处理异步任务：</p>
<p>####(1) 回调函数<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params">callback</span>)</span>&#123; </span><br><span class="line">    。。。。。（异步任务：事件监听、前端请求、定时器）</span><br><span class="line">    callback( )</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params"></span>)</span>&#123; 。。。。。（任务）&#125;</span><br><span class="line">A(B)</span><br></pre></td></tr></table></figure></p>
<p>####(2) Promise大法<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myPromise = <span class="keyword">new</span> <span class="built_in">Promise</span>(</span><br><span class="line">    (resolve,reject)=&gt;&#123;</span><br><span class="line">      	。。。。。（异步任务：事件监听、前端请求、定时器）</span><br><span class="line">    	resolve( )</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line">myPromise().then(<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;, ()=&gt;&#123;&#125;)</span><br></pre></td></tr></table></figure></p>
<p>####(3) async/await</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*async函数*/</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'进入fn函数'</span>)</span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>)=&gt;</span>&#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'时间到了'</span>)</span><br><span class="line">            resolve(<span class="string">'这里异步返回的结果'</span>)</span><br><span class="line">        &#125;, <span class="number">2000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(result)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'fn函数的结果'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*async函数的调用*/</span></span><br><span class="line">fn().then(<span class="function">(<span class="params">xx</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(xx)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'fn函数之后的同步函数'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*输出结果*/</span></span><br><span class="line">输出：进入fn函数</span><br><span class="line">输出：fn函数之后的同步函数</span><br><span class="line">输出：时间到了</span><br><span class="line">输出：这里异步返回的结果</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*async函数*/</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'进入fn函数'</span>)</span><br><span class="line">       setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">         <span class="built_in">console</span>.log(<span class="string">'时间到了'</span>)</span><br><span class="line">       &#125;, <span class="number">2000</span>)</span><br><span class="line">       <span class="keyword">return</span> <span class="string">'fn函数的结果'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*async函数的调用*/</span></span><br><span class="line">fn().then(<span class="function">(<span class="params">xx</span>)=&gt;</span>&#123;</span><br><span class="line">     <span class="built_in">console</span>.log(xx)</span><br><span class="line">   &#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'fn函数之后的同步函数'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*输出结果*/</span></span><br><span class="line">输出：进入fn函数</span><br><span class="line">输出：fn函数之后的同步函数</span><br><span class="line">输出：fn函数的结果</span><br><span class="line">输出：时间到了</span><br></pre></td></tr></table></figure>
<p>#三、什么是闭包：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*创建闭包*/</span></span><br><span class="line"><span class="keyword">let</span> xx = <span class="function">(<span class="params">(</span>)=&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">let</span> date = <span class="number">100</span></span><br><span class="line"> 	<span class="keyword">return</span> <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line"> 		<span class="keyword">return</span> date++</span><br><span class="line"> 	&#125;</span><br><span class="line">&#125;)()</span><br><span class="line"><span class="comment">/*使用闭包*/</span></span><br><span class="line">xx()</span><br></pre></td></tr></table></figure></p>
<p>##1. 定义：<br>如果一个函数使用了它范围之外的变量，那么这个函数和这个变量就组成了闭包。</p>
<p>##2. 目的：</p>
<ul>
<li>让一个局部变量拥有全局变量的随处可以访问到的优点</li>
<li>而又不拥有全局变量污染全局环境的缺点。</li>
</ul>
<p>##3. 如何使用：</p>
<ul>
<li>定义外层函数，封装被保护的局部变量； </li>
<li>定义内层函数，执行对外部函数变量的操作；</li>
<li>外层函数返回内层函数的地址，此步骤方法有很多！ </li>
</ul>
<p>##4. 何时使用：</p>
<ul>
<li>需要一个全局变量，但又不想定义成全局的，就可以用闭包，<br>  即在函数内定义局部变量，在函数外照用不误！</li>
<li>局部变量：无法共享（函数外无法使用），无法长久保存</li>
<li>全局变量：可能造成变量污染</li>
</ul>
<p>##5. 闭包缺点：<br>占用更多内存，不容易被释放 </p>
<p>#四、自调用函数（IIFE）：</p>
<p>##1. 函数创建之后，立即调用该函数： </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">方式<span class="number">1</span>：!<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;()</span><br><span class="line">方式<span class="number">2</span>：;(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;())</span><br><span class="line">方式<span class="number">3</span>：;(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)()</span><br></pre></td></tr></table></figure>
<p>##2. 存在目的：<br>造出一个全局作用域，防止污染全局变量</p>
<p>##3. 何时使用：</p>
<ul>
<li>1、我们不想要全局变量，所以我们要使用局部变量</li>
<li>2、ES5里面，只有函数有局部变量</li>
<li>3、于是我们声明一个函数function xxx，然后xxx.call( )</li>
<li>4、这个时候，xxx是全局变量（全局函数）</li>
<li>5、所以我们不能给这个函数名字</li>
<li>6、于是写成 !funtion( ){ }.call( ) ，即自调用函数，注意结果被取反了</li>
</ul>
<p>#五、作用域和调用堆栈</p>
<p>##1. 作用域：</p>
<ul>
<li>JS作用域是指变量存在的范围，分为全局作用域、函数作用域、块级作用域。</li>
<li>函数作用域：函数本身作用域是其定义时所处的作用域，而不是其调用时所处的作用域。</li>
<li>作用域链：通过链式查找，可确定哪些数据能被函数访问。</li>
</ul>
<p>##2. 函数声明提升：<br>函数声明可以提升至其所处作用域顶部，函数表达式不可以</p>
<p>##3. 调用堆栈：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*函数A内部有函数B，函数B内部有函数C*/</span></span><br><span class="line">A()&#123;</span><br><span class="line">    。。。。</span><br><span class="line">    B()&#123;</span><br><span class="line">        。。。。</span><br><span class="line">        C()&#123;</span><br><span class="line">            。。。。</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        。。。。</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    。。。。</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">。。。</span><br><span class="line">A( )</span><br><span class="line">。。。</span><br><span class="line"></span><br><span class="line">分析：</span><br><span class="line">计算机在主程从上到下执行，</span><br><span class="line">碰到函数A，进入函数体，从上到下执行，</span><br><span class="line">碰到函数B，进入函数体，从上到下执行，</span><br><span class="line">碰到函数C，进入函数体，从上到下执行，</span><br><span class="line">在函数C内<span class="keyword">return</span>时跳出函数体，回到函数B</span><br><span class="line">在函数B内<span class="keyword">return</span>时跳出函数体，回到函数A</span><br><span class="line">在函数A内<span class="keyword">return</span>时跳出函数体，回到主程</span><br></pre></td></tr></table></figure></p>
<p>#六、高阶函数和柯里化<br><img src="http://piks830x0.bkt.clouddn.com/%E5%87%BD%E6%95%B0%E5%B5%8C%E5%A5%97.png" alt=""></p>
<p><a href="http://piks830x0.bkt.clouddn.com/%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE.png" target="_blank" rel="noopener">辅助理解</a></p>
<p>##1. 什么是高阶函数？</p>
<ul>
<li>输入一个或多个函数</li>
<li>输出一个函数</li>
<li>满足上面条件之一就是高阶函数，但通常同时满足两个</li>
</ul>
<p>##2. 什么是柯里化？<br>用单参数的函数模拟多参数的函数，调用某函数并传入部分参数，让它返回一个函数去接受剩下的参数。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">将f(x, y)变成f(x=<span class="number">1</span>)(y) 或 f(y=<span class="number">1</span>)(x)</span><br></pre></td></tr></table></figure>
<p>##3. 柯里化应用：</p>
<ul>
<li>分批传值：<ul>
<li>假设函数需要传入多个值，可以一个值一个值的传递，</li>
<li>也可以固定某些参数，让余下的参数在已有的参数上运算。</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curry</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> outerArgs = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"> </span>)</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> innerArgs  = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>)</span><br><span class="line">        <span class="keyword">let</span> finalArgs = outerArgs.concat(innerArgs)</span><br><span class="line">        <span class="keyword">return</span> fn.apply(<span class="literal">undefined</span>, finalArgs)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x+y&#125;</span><br><span class="line"><span class="keyword">let</span> curried = curry(add,<span class="number">10</span>)</span><br><span class="line">curried(<span class="number">2</span>)  <span class="comment">//12</span></span><br><span class="line">curried(<span class="number">3</span>)  <span class="comment">//13</span></span><br></pre></td></tr></table></figure>
<ul>
<li>早期模板引擎：</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">templatebar</span>(<span class="params">x</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">y</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x.replace(<span class="string">'&#123;&#123;name&#125;&#125;'</span>,y.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> curried = templatebar(<span class="string">'&lt;h1&gt;你好，我叫&#123;&#123;name&#125;&#125;&lt;/h1&gt;'</span>)</span><br><span class="line"><span class="literal">undefined</span></span><br><span class="line">curried(&#123;<span class="attr">name</span>:<span class="string">'张治国'</span>&#125;)</span><br><span class="line"><span class="string">"&lt;h1&gt;你好，我叫张治国&lt;/h1&gt;"</span></span><br><span class="line">curried(&#123;<span class="attr">name</span>:<span class="string">'邢晓栋'</span>&#125;)</span><br><span class="line"><span class="string">"&lt;h1&gt;你好，我叫邢晓栋&lt;/h1&gt;"</span></span><br></pre></td></tr></table></figure>
<p>#七、什么是惰性载入？</p>
<p>##1. 目的<br>提高性能，避免代码重复执行，即让函数的分支仅发生一次</p>
<p>##2. 特点：</p>
<ul>
<li><p>非惰性载入，每次调用fn时都会做判断，降低性能</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> kk</span><br><span class="line">    <span class="keyword">if</span>(xx)&#123;</span><br><span class="line">        kk = ABC</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        kk = DEF</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fx</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>惰性载入，只在首次调用fn时做判断，以后调用直接使用被分配的东东</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123; </span><br><span class="line">    <span class="keyword">if</span>(xx)&#123;</span><br><span class="line">        fn = ABC</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        fn = DEF</span><br><span class="line">    &#125;</span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure>
</li>
<li><p>惰性载入，声明的同时调用fn，只在首次调用fn时做判断，以后调用直接使用分配的东东</p>
<pre><code class="js"><span class="keyword">let</span> fn = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>{
    <span class="keyword">if</span>(xx){
        fn = ABC
    }<span class="keyword">else</span>{
        fn = DEF
    }
})()
</code></pre>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/22/JS-函数（升级）/" data-id="cjospacg5000gk4qrsu7y698t" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JS-函数（基础）" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/22/JS-函数（基础）/" class="article-date">
  <time datetime="2018-11-22T08:48:41.000Z" itemprop="datePublished">2018-11-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/22/JS-函数（基础）/">JS-函数（基础）</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>#参考资料：MDN、《JS高程》、《JS权威指南》</p>
<p>#一、函数创建和调用</p>
<p>##1. 函数定义相关问题：</p>
<ul>
<li>函数就是一种可执行代码组成的对象，是一等公民，</li>
<li>即使形式上作为对象的方法存在，也不属于该对象，只是把函数的地址赋值给了对象而已。</li>
</ul>
<p>##2. 函数创建相关问题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*具名函数*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">x, y</span>)</span>&#123;<span class="keyword">return</span> x+y&#125;					<span class="comment">/*函数声明语句*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*匿名函数*/</span></span><br><span class="line"><span class="keyword">let</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params">x,y</span>)</span>&#123;<span class="keyword">return</span> x+y&#125;				<span class="comment">/*匿名函数表达式*/</span></span><br><span class="line"><span class="keyword">let</span> fn = <span class="function"><span class="keyword">function</span> <span class="title">kk</span>(<span class="params">x ,y</span>)</span>&#123; <span class="keyword">return</span> x+y &#125;      	<span class="comment">/*命名函数表达式*/</span></span><br><span class="line"> 	<span class="keyword">let</span> fn = <span class="built_in">Function</span>(<span class="string">'x'</span>, <span class="string">'y'</span>, <span class="string">'return x+y'</span>)		<span class="comment">/*构造函数*/</span></span><br><span class="line"> 	</span><br><span class="line"> 	<span class="comment">/*箭头函数*/</span></span><br><span class="line"> 	<span class="keyword">let</span> fn = <span class="function">(<span class="params">x,y</span>)=&gt;</span>&#123;<span class="keyword">return</span> x+y&#125;     	          	<span class="comment">/*箭头函数*/</span></span><br></pre></td></tr></table></figure>
<p>##3. 函数调用相关问题：</p>
<ol>
<li>sum( )，语法糖，不建议使用；</li>
<li>sum.call(sum, 实参)，高手都这么用！</li>
</ol>
<p>##4. 知识补充：</p>
<ul>
<li>用return来指定函数的返回值，如果没有指定，则为undefined，<br>  特殊的构造函数不需要return，但通常要绑定原型</li>
<li>函数创建时为形参，函数调用时为实参，同名参数取后者</li>
<li>不能在非函数代码块中声明函数，比如在 if/else 语句块中、或 try/catch 语句块中；</li>
<li>箭头函数，一个形参时小括号可省略，一个表达式时花括号可省略，return也可省略</li>
<li>参数的值只有在传参的时候确定；this作为call的第一个参数，也是只有传参的时候才确定！</li>
<li>函数体内的this对象，就是定义时所在的对象。</li>
</ul>
<p>#二、函数的属性和方法</p>
<p>##1. 内部的属性</p>
<ol>
<li>this：看难点章节</li>
<li>arguments—-“实参对象（类数组）”</li>
</ol>
<ul>
<li>argument.length—-“实参数量”</li>
<li>arguments.callee—-“在函数内部获取函数自身的引用，也可以用函数名，但出现高耦合！”</li>
<li>caller—-“指向调用当前函数的那个函数”</li>
</ul>
<p>##2. 自带的属性：<br>1、name： 函数名字</p>
<ul>
<li>函数声明语句：sum;</li>
<li>匿名函数表达式：sum;</li>
<li>命名函数表达式：add;</li>
<li>箭头函数：sum;</li>
<li>new Function：anonymous  //匿名的意思</li>
</ul>
<p>2、length：形参数量，即定义时的参数个数。</p>
<p>##3. 其他常用方法：<br><a href="http://piks830x0.bkt.clouddn.com/bind%20call%E7%AD%89%E6%96%B9%E6%B3%95%E6%AF%94%E8%BE%83.png" target="_blank" rel="noopener">bind和call的使用时比较：例1</a></p>
<p><a href="http://piks830x0.bkt.clouddn.com/bind%20call%E7%AD%89%E6%96%B9%E6%B3%95%E6%AF%94%E8%BE%832.png" target="_blank" rel="noopener">bind和call的使用时比较：例2</a></p>
<p>1、call(): </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fun.call( obj, arg1, arg2, ……)</span><br></pre></td></tr></table></figure>
<ul>
<li>参数：第一个实参是调用上下文，在函数体内通过this来引用；</li>
<li>其他参数是实参，在函数体内通过argumens类数组来引用。</li>
<li>在普通模式下，call( )的第一个实参是基本类型会变成相应的包装对象，null和undefined会变成window全局对象。</li>
<li>在严格模式下，call( )的第一个实参会变成this的值，即使它是基本类型，甚至是null或undefined，依然如此；</li>
</ul>
<p>2、apply(): </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fun.apply( obj, [arg1, arg2, ……] )</span><br></pre></td></tr></table></figure>
<p>3、bind(): 创建函数，指定新函数内this是谁</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fun.bind( obj, arg1, arg2 )</span><br></pre></td></tr></table></figure>
<ul>
<li>bind()创建新函数，新函数与fun具有相同函数体，</li>
<li>新函数的this就是bind的第一个参数obj，</li>
<li>新函数的参数就是bind的其他参数arg1和arg2</li>
<li>至此，实现了修改fun内this指向的目的，与call和apply目的一致。</li>
<li>因为bind()返回一个新函数，加上括号输入实参才能正常使用，<br>  这一点和call()、apply()不一样！！！</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params">y, z</span>)</span>&#123;<span class="keyword">return</span> <span class="keyword">this</span>.x+y+z&#125;;</span><br><span class="line">  	<span class="keyword">let</span> fn = f.bind(&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;, <span class="number">2</span> , <span class="number">5</span>)()   <span class="comment">/*输出8*/</span></span><br></pre></td></tr></table></figure>
<p>4、eval()</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*将字符串当做语句执行*/</span></span><br><span class="line"><span class="built_in">eval</span>( <span class="string">"console.log(123)"</span> );    <span class="comment">//输出123</span></span><br></pre></td></tr></table></figure>
<ul>
<li>eval没有自己作用域，都在当前作用域内执行。</li>
<li>普通模式下会修改它所处作用域内变量的值，造成安全问题</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="number">1</span>;   </span><br><span class="line"><span class="built_in">eval</span>(<span class="string">"a=3"</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>严格模式下，不会影响外部作用域。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/22/JS-函数（基础）/" data-id="cjospacg1000ck4qr8s8pms0w" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/11/22/JS-相等和全等的区别/">JS-相等和全等的区别</a>
          </li>
        
          <li>
            <a href="/2018/11/22/JS-数据类型及类型转换/">JS-数据类型及类型转换</a>
          </li>
        
          <li>
            <a href="/2018/11/22/JS-变量/">JS-变量</a>
          </li>
        
          <li>
            <a href="/2018/11/22/JS-null和undefined/">JS-null和undefined</a>
          </li>
        
          <li>
            <a href="/2018/11/22/JS-Promist对象/">JS-Promist对象</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 张治国<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>